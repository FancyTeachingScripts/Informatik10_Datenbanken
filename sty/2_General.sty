\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{sty/2_General}[]


\usetikzlibrary{shapes.geometric, arrows, positioning, shapes.geometric, arrows.meta, calc, bending,fadings}
\providecommand{\umltextcolor}{black}
%\renewcommand{\umlfillcolor}{white}
\providecommand{\umldrawcolor}{black}
\renewcommand{\emph}[1]{\textbf{#1}}
\providecommand{\currentsection}{\nameref{\thesection}}

\tikzstyle{startstop} = [rectangle, rounded corners, 
minimum width=2cm, 
minimum height=0.7cm,
text centered, 
draw=black]

\tikzstyle{io} = [trapezium, 
trapezium stretches=true, % A later addition
trapezium left angle=70, 
trapezium right angle=110, 
minimum width=2cm, 
minimum height=0.7cm, text centered, 
draw=black]

\tikzstyle{process} = [rectangle, 
minimum width=2cm, 
minimum height=0.7cm, 
text centered, 
text width=3cm, 
draw=black]

\tikzstyle{decision} = [diamond, 
minimum width=2cm, 
minimum height=1cm, 
text centered, 
draw=black]

\tikzstyle{arrow} = [thick,->,>=stealth]
\@ifundefined{NC@rewrite@C}{\newcolumntype{C}{>{\Centering\hspace{0pt}}X}}{}

\tikzstyle{dfddata} =[box, 
    rounded corners=1pt,  
    minimum width=1pt]

\tikzset{box/.style={draw, rectangle, rounded corners=3pt, align=center}}


\newcommand\calcVerticalBoxes[2]{%
  % Resthöhe bestimmen
  \newdimen\resthoehe
  \resthoehe=\dimexpr\pagegoal-\pagetotal\relax
  % Falls wir ausserhalb des Seitenbaus sind: \pagegoal = \maxdimen → Fallback
  \ifdim\pagegoal=\maxdimen
    \resthoehe=\dimexpr\vsize-\pagetotal\relax
  \fi
  \typeout{pagegoal: \the\pagegoal}%
  \typeout{pagetotal: \the\pagetotal}
  \typeout{resthoehe: \the\resthoehe}%
  \typeout{maxdimen: \the\maxdimen}%
  \typeout{vsize: \the\vsize}%
  \typeout{pgflinewidth: \the\pgflinewidth}%
  % --- alle Dimensionen in nackte Zahlen (pt) umwandeln ---
  \edef\cvb@restpt{\strip@pt\resthoehe}%
  \edef\cvb@linept{\strip@pt\pgflinewidth}%
  \edef\cvb@boxpt{\strip@pt\dimexpr #1\relax}%
  % Schutz gegen 0 oder negative Boxhöhe
  \ifdim\dimexpr #1\relax>\z@
    \pgfmathtruncatemacro\anzahlv{(\cvb@restpt-\cvb@linept)/\cvb@boxpt}%
  \else
    \def\anzahlv{0}%
  \fi
  \typeout{anzahlv: \anzahlv}
  % Gewünschte Anzahl vs. mögliche Anzahl vergleichen
  \ifnum#2>\anzahlv\relax
    \PackageInfo{sty/2_General}{#2 Kaestchen gefordert, aber nur \anzahlv\space passen. Verwende \anzahlv.}%
    \edef\vertcount{\anzahlv}%
  \else
    \edef\vertcount{#2}%
  \fi
  \typeout{vertcount: \vertcount}
}

\renewcommand{\hinweis}[1]{
    \ifhints
        {\color{gray}\small \faInfoCircle~#1}
    \fi
}


\renewcommand\kariert[2][0.5cm]{% 
	\begin{tikzpicture}[gray,step=#1]
	\pgfmathtruncatemacro\anzahl{(\linewidth-\pgflinewidth)/#1} % maximale Anzahl Kästchen pro Zeile
	\draw (0,0) rectangle (\anzahl*#1,#2*#1) (0,0) grid (\anzahl*#1,#2*#1);
	\end{tikzpicture} 
}


\renewcommand{\multi}{\item[$\circ$]}

\renewcommand\liniert[2][1.2cm]{% 
	\begin{tikzpicture}[gray]
	\path[use as bounding box](0,0)rectangle(\linewidth,-#2*#1-0.5\pgflinewidth); 
	\foreach \n in {1,...,#2}\draw(0 ,-#1*\n )--(\linewidth,-#1*\n ); 
	\end{tikzpicture}}

\lstset{
tabsize = 1, %% set tab space width
keywordstyle = \color{purple}, %% set keyword color
stringstyle = \color{green}, %% set string color
rulecolor = \color{\TFarbe}, %% set frame color to avoid being affected by text color
breaklines = true, %% enable line breaking
numberstyle = \footnotesize,
language = Java , 
firstnumber = last , 
escapeinside={(*@}{@*)}
}

\ifbeamer
	\hypersetup{
		colorlinks=true,
		linkcolor=white,
		filecolor=magenta,      
		urlcolor=Lavender,
		%pdftitle={\Titeltext},
	}
\else
	\hypersetup{
		colorlinks=true,
		linkcolor=blue,
		filecolor=magenta,      
		urlcolor=BlueViolet,
		%pdftitle={\Titeltext},
	}
\fi
